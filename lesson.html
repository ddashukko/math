<!doctype html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —É—Ä–æ–∫—É...</title>

    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/lesson.css" />
    <link rel="stylesheet" href="css/board.css" />

    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            ["$", "$"], // –î–æ–∑–≤–æ–ª—è—î —Ñ–æ—Ä–º—É–ª–∏ —á–µ—Ä–µ–∑ $...$
            ["\\(", "\\)"], // –î–æ–∑–≤–æ–ª—è—î —Ñ–æ—Ä–º—É–ª–∏ —á–µ—Ä–µ–∑ \(...\)
          ],
          displayMath: [
            ["$$", "$$"],
            ["\\[", "\\]"],
          ],
        },
        svg: {
          fontCache: "global",
        },
        startup: {
          typeset: false, // –í–∞–∂–ª–∏–≤–æ! –ú–∏ –±—É–¥–µ–º–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –≤—Ä—É—á–Ω—É
        },
      };
    </script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
  </head>
  <body class="board-hidden">
    <div id="loader-overlay">
      <div class="loader-content">
        <div class="spinner"></div>
        <h2 id="loader-text">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</h2>
        <div class="progress-line">
          <div id="loader-bar" class="progress-fill"></div>
        </div>
        <p id="loader-percent">0%</p>
      </div>
    </div>
    <header>
      <div style="display: flex; align-items: center; gap: 15px">
        <a href="index.html" class="btn-home">‚Üê –ú–µ–Ω—é</a>
        <div id="lesson-title" style="font-weight: 700">...</div>
      </div>

      <a
        href="admin.html"
        id="teacher-btn"
        class="btn-teacher"
        style="display: none"
      >
        –ö–∞–±—ñ–Ω–µ—Ç
      </a>

      <button
        onclick="toggleBoard()"
        class="btn-board-toggle"
        title="–ü–æ–∫–∞–∑–∞—Ç–∏/–°—Ö–æ–≤–∞—Ç–∏ –¥–æ—à–∫—É"
      >
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
          <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
          <path d="M2 2l7.586 7.586"></path>
          <circle cx="11" cy="11" r="2"></circle>
        </svg>
        <span>–î–æ—à–∫–∞</span>
      </button>
    </header>

    <div id="app-wrapper">
      <div id="tasks-section">
        <div class="container" style="margin: 0; width: 100%; max-width: none">
          <div id="quiz-root"></div>

          <div id="lesson-footer" class="footer-nav"></div>
        </div>
      </div>

      <div id="board-section">
        <div class="tools-panel">
          <button
            id="btn-pen"
            class="tool-btn active"
            onclick="setTool('pen')"
            title="–†—É—á–∫–∞"
          >
            üñäÔ∏è
          </button>
          <button
            id="btn-eraser"
            class="tool-btn"
            onclick="setTool('eraser')"
            title="–ì—É–º–∫–∞"
          >
            üßπ
          </button>
          <button
            class="tool-btn"
            onclick="clearBoard()"
            title="–û—á–∏—Å—Ç–∏—Ç–∏"
            style="color: red"
          >
            ‚ùå
          </button>
        </div>
        <canvas id="board"></canvas>
      </div>
    </div>

    <div id="confirm-modal" class="modal-overlay" style="z-index: 10001">
      <div class="modal-content">
        <span class="modal-icon">ü§î</span>
        <h2 class="modal-title" id="confirm-title">–í–ø–µ–≤–Ω–µ–Ω–∞?</h2>
        <p class="modal-desc" id="confirm-text">
          –¢–∏ —Ç–æ—á–Ω–æ —Ö–æ—á–µ—à –∑–∞–≤–µ—Ä—à–∏—Ç–∏ —Ä–æ–±–æ—Ç—É?
        </p>

        <div style="display: flex; gap: 10px; flex-direction: column">
          <button
            id="confirm-yes-btn"
            class="btn-modal"
            style="
              background: #ef4444;
              box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
            "
          >
            –¢–∞–∫, –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ
          </button>

          <button onclick="closeConfirmModal()" class="btn-modal secondary">
            –û–π, –Ω—ñ, –Ω–∞–∑–∞–¥
          </button>
        </div>
      </div>
    </div>

    <div id="modal-overlay" class="modal-overlay">
      <div class="modal-content">
        <div class="score-circle" id="final-score">0%</div>
        <h2 style="margin-bottom: 10px">–ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞! üéâ</h2>
        <p id="final-text" style="color: #64748b; margin-bottom: 24px">...</p>

        <a
          href="index.html"
          class="btn-home"
          style="background: #4f46e5; color: white; display: inline-block"
          >–ù–∞ –≥–æ–ª–æ–≤–Ω—É</a
        >
        <button
          onclick="
            document.getElementById('modal-overlay').classList.remove('active')
          "
          style="
            background: none;
            border: none;
            color: #64748b;
            cursor: pointer;
            margin-top: 10px;
            text-decoration: underline;
          "
        >
          –ó–∞–ª–∏—à–∏—Ç–∏—Å—å —Ç—É—Ç
        </button>
      </div>
    </div>

    <script type="module" src="js/engine.js"></script>
    <script src="js/board.js"></script>
    <div id="auth-modal" class="modal-overlay gatekeeper">
      <div class="modal-content">
        <span class="modal-icon">üîí</span>
        <h2 class="modal-title">–í—Ö—ñ–¥ —É —Å–∏—Å—Ç–µ–º—É</h2>
        <p class="modal-desc">
          –©–æ–± —Ç–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–±–µ—Ä—ñ–≥—Å—è —ñ –≤—á–∏—Ç–µ–ª—å –π–æ–≥–æ –ø–æ–±–∞—á–∏–≤, –ø–æ—Ç—Ä—ñ–±–Ω–æ —É–≤—ñ–π—Ç–∏.
        </p>

        <button onclick="googleLogin()" class="btn-modal">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
              fill="#4285F4"
            />
            <path
              d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
              fill="#34A853"
            />
            <path
              d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z"
              fill="#FBBC05"
            />
            <path
              d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
              fill="#EA4335"
            />
          </svg>
          –£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
        </button>
      </div>
    </div>
  </body>
</html>
